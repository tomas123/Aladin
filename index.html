<!DOCTYPE html>
<html>
<head>
<title>Aladin + Northern Sky Narrowband Survey</title>

<style>
/* CSS Farbfilter f√ºr HSO / SHO */
.swap120 #aladin-lite-div canvas {
    filter: hue-rotate(120deg) saturate(1.0);
}

.swap240 #aladin-lite-div canvas {
    filter: hue-rotate(240deg) saturate(1.0);
}
</style>

</head>

<body>    

<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

<button id="toggleSimbad">SIMBAD ein / aus</button>

<!-- Survey-Auswahl -->
<input type="radio" name="survey" value="https://www.simg.de/nebulae3/dr0_2/halpha8" checked> Ha 8
<input type="radio" name="survey" value="https://www.simg.de/nebulae3/dr0_2/oiii8"> Oiii 8
<input type="radio" name="survey" value="https://www.simg.de/nebulae3/dr0_2/sii8"> Sii 8
<input type="radio" name="survey" value="https://www.simg.de/nebulae3/dr0_2/rgb8"> RGB 8
<input type="radio" name="survey" value="https://www.simg.de/nebulae3/dr0_2/ohs8"> OHS 8
<!-- Berechnete Presets -->
<input type="radio" name="survey" value="SOH"> SOH 8
<input type="radio" name="survey" value="HSO"> HSO 8

<input type="radio" name="survey" value="https://www.simg.de/nebulae3/dr0_1/tc8"> TC 8
<input type="radio" name="survey" value="P/DSS2/color"> DSS color
<input type="radio" name="survey" value="http://alasky.u-strasbg.fr/MellingerRGB"> Mellinger
<input type="radio" name="survey" value="https://www.simg.de/nebulae3/dr0_2/halpha"> Ha 16
<input type="radio" name="survey" value="https://www.simg.de/nebulae3/dr0_2/oiii"> Oiii 16

<div id="aladin-lite-div" style="width:100vw;height:95vh"></div>

<script src="https://aladin.cds.unistra.fr/AladinLite/api/v3/latest/aladin.js"></script>

<script>
let aladin;
let simbad;

A.init.then(() => {

    aladin = A.aladin('#aladin-lite-div', {
        survey: "https://www.simg.de/nebulae3/dr0_2/halpha8",
        fov: 360,
        target: "orion nebula",
        projection: "SIN",
        cooFrame: 'equatorial',
        showCooGridControl: true,
        showSimbadPointerControl: true,
        showCooGrid: false
    });

    function deepSkyFilter(obj) {
        if (!obj.data || !obj.data.main_id) return false;
        const name = obj.data.main_id;
        return /^(M\s*\d+|NGC\s*\d+|IC\s*\d+|SNR|SH)/i.test(name);
    }

    simbad = A.catalogHiPS(
        'https://hipscat.cds.unistra.fr/HiPSCatService/Simbad',
        { name: 'Deep Sky Objects', color: 'cyan', onClick: 'showTable', filter: deepSkyFilter }
    );

    let simbadVisible = false;
    document.getElementById("toggleSimbad").onclick = () => {
        simbadVisible = !simbadVisible;
        if (simbadVisible) aladin.addCatalog(simbad);
        else aladin.removeLayers();
    };
});

// Survey-Umschaltung inklusive HSO / SHO Farbfilter
$('input[name=survey]').change(function() {
    const val = $(this).val();

    // Alle CSS-Klassen entfernen
    document.body.classList.remove("swap120", "swap240");

    if (val === "SOH") {
        aladin.setImageSurvey("https://www.simg.de/nebulae3/dr0_2/ohs8");
        document.body.classList.add("swap120");
    } 
    else if (val === "HSO") {
        aladin.setImageSurvey("https://www.simg.de/nebulae3/dr0_2/ohs8");
        document.body.classList.add("swap240");
    } 
    else {
        aladin.setImageSurvey(val);
    }
});
</script>

</body>
</html>
