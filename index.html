<!DOCTYPE html>
<html>
<head>
<title>Aladin + Northern Sky Narrowband Survey</title>
</head>

  <body>    
    <!-- our code needs jQuery library -->
<script type="text/javascript" src="https://code.jquery.com/jquery-3.7.1.min.js" charset="utf-8"></script>

<!-- Aladin Lite container at requested dimensions -->
<button id="toggleSimbad">SIMBAD ein / aus</button>

<input id="halpha8" type="radio" name="survey" value="https://www.simg.de/nebulae3/dr0_2/halpha8" checked><label for="halpha8">H-alpha 8</label>
<input id="oiii8" type="radio" name="survey" value="https://www.simg.de/nebulae3/dr0_2/oiii8"><label for="oiii8">Oiii 8</label>
<input id="sii8" type="radio" name="survey" value="https://www.simg.de/nebulae3/dr0_2/sii8"><label for="sii8">Sii 8</label>
<input id="halpha" type="radio" name="survey" value="https://www.simg.de/nebulae3/dr0_2/halpha"><label for="halpha">H-alpha 16</label>
<input id="oiii" type="radio" name="survey" value="https://www.simg.de/nebulae3/dr0_2/oiii"><label for="oiii">Oiii 16</label>
<input id="rgb8" type="radio" name="survey" value="https://www.simg.de/nebulae3/dr0_2/rgb8"><label for="rgb8">RGB 8</label>
<input id="hbr8" type="radio" name="survey" value="https://www.simg.de/nebulae3/dr0_2/hbr8"><label for="hbr8">HBR 8</label>
<input id="hbr8" type="radio" name="survey" value="https://www.simg.de/nebulae3/dr0_2/ohs8"><label for="hbr8">OHS 8</label>
<input id="tc8" type="radio" name="survey" value="https://www.simg.de/nebulae3/dr0_1/tc8"><label for="tc8">TC 8</label>
<input id="DSS" type="radio" name="survey" value="P/DSS2/color"><label for="DSS">DSS color</label>
<input id="Mellinger" type="radio" name="survey" value="http://alasky.u-strasbg.fr/MellingerRGB"><label for="Mellinger">Mellinger</label>

<div id="aladin-lite-div" style="width: 100vw; height: 95vh"></div>

<!-- Aladin Lite JS code -->
<script type="text/javascript" src="https://aladin.cds.unistra.fr/AladinLite/api/v3/latest/aladin.js" charset="utf-8"></script>

<!-- Creation of Aladin Lite instance with initial parameters -->
<script type="text/javascript">
let aladin;

A.init.then(() => {

    aladin = A.aladin('#aladin-lite-div', {
        survey: "https://www.simg.de/nebulae3/dr0_2/halpha8",
        fov: 360,
        target: "orion nebula",
        projection: "SIN",
        cooFrame: 'equatorial',
        showCooGridControl: true,
        showSimbadPointerControl: true,
        showCooGrid: false
    });

    //This filter function is being passed a Source object and must return true if the source must be shown, false otherwise.
    function deepSkyFilter(obj) {
        //if (!obj.data || !obj.data.main_id) return false;
        const name = obj.data.main_id;
        //M 31 NGC 7000 usw
        return /^(M\s*\d+|NGC\s*\d+|IC\s*\d+|SNR\s*|SH\s*)/i.test(name);
    }

    let simbad = A.catalogHiPS(
        'https://hipscat.cds.unistra.fr/HiPSCatService/Simbad',
        {
            name: 'Deep Sky Objects',
            color: 'cyan',
            onClick: 'showTable',
            filter: deepSkyFilter
        }
    );

    // Ein/Aus-Schalter
    let simbadVisible = false;

    document.getElementById("toggleSimbad").onclick = function() {
        simbadVisible = !simbadVisible;
        if (simbadVisible) {
            aladin.addCatalog(simbad);
        } else {
            aladin.removeLayers();
        }
    };
});
</script>

<script type="text/javascript">
$(document).ready(function() {
    $('input[name=survey]').change(function() {
        aladin.setImageSurvey($(this).val());
    });
});
</script>

  </body>
</html>
